# Configuración de GitLab CI/CD para GitLab Pages
# Este archivo despliega automáticamente la aplicación en GitLab Pages

# Define las etapas del pipeline
stages:
  - deploy

# Job de despliegue
pages:
  stage: deploy

  # Usa una imagen de Node.js básica (aunque no la necesitamos, es liviana)
  image: alpine:latest

  script:
    # Crea el directorio public (requerido por GitLab Pages)
    - mkdir -p public

    # Copia todos los archivos de la aplicación al directorio public
    - cp index.html public/
    - cp style.css public/
    - cp app.js public/
    - cp qrcode-generator.min.js public/
    - cp README.md public/ || true  # Opcional, no falla si no existe

  artifacts:
    paths:
      # GitLab Pages busca los archivos en el directorio 'public'
      - public

  # Solo se ejecuta en la rama principal
  only:
    - main
    - master
